#!/usr/bin/env php
<?php

function includeIfExists($file)
{
    if (file_exists($file)) {
        return include $file;
    }
}

$loader = __DIR__ . '/../vendor/autoload.php';

if (!file_exists($loader)) {
    $loader = __DIR__ . '/../../../autoload.php';
}

if (!file_exists($loader)) {
    die(
        'You must set up the project dependencies, run the following commands:' . PHP_EOL .
        'curl -s http://getcomposer.org/installer | php' . PHP_EOL .
        'php composer.phar install' . PHP_EOL
    );
}

require $loader;

use Symfony\Component\Console\Application;
use GrowChart\RestClient\Command as RestCommand;
use GrowChart\SoapClient\Command as SoapCommand;

$application = new Application('GROW Console Client', '0.0.1');
$application->setCatchExceptions(true);
$application->add(new RestCommand\RegisterPregnancyCommand());
$application->add(new RestCommand\AddMeasurementCommand());
$application->add(new RestCommand\GetImageCommand());
// TODO: Add commands for xml:registerPregnancy, xml:addMeasurement, etc
$application->add(new SoapCommand\RegisterPregnancyCommand());
$application->add(new SoapCommand\GetImageCommand());
// TODO: Add commands for soap:registerPregnancy, soap:addMeasurement, etc
$application->run();
